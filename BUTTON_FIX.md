# Исправление проблемы с кнопками торговли

## Проблема
Кнопка "Stop Trading" не работает в веб-панели.

## Решение

### 1. Проверьте статус торговли
В веб-панели теперь отображается:
- **Зеленый индикатор** - торговля активна
- **Желтый индикатор** - торговля остановлена
- **Счетчик активных сделок** - количество открытых позиций

### 2. Логика работы кнопок

#### Кнопка "Start Trading":
- Отображается только когда торговля остановлена
- Требует выбранную пару и стратегию
- Запускает автоматическую торговлю

#### Кнопка "Stop Trading":
- Отображается только когда торговля активна
- Останавливает все активные сделки
- Прекращает автоматическую торговлю

### 3. Проверка работы

#### В логах приложения должно появиться:
```
Trading started successfully
Trading stopped successfully
```

#### В веб-панели:
- Статус должен измениться с "STOPPED" на "ACTIVE"
- Кнопки должны переключаться
- Счетчик активных сделок должен обновляться

### 4. Устранение неполадок

#### Проблема: Кнопка не реагирует
**Решение:**
1. Проверьте JavaScript в браузере (F12 -> Console)
2. Убедитесь, что форма отправляется правильно
3. Проверьте логи приложения

#### Проблема: Статус не обновляется
**Решение:**
1. Обновите страницу (F5)
2. Проверьте, что приложение запущено
3. Проверьте подключение к базе данных

#### Проблема: Ошибка при нажатии
**Решение:**
1. Проверьте логи приложения
2. Убедитесь, что все зависимости загружены
3. Перезапустите приложение

### 5. Тестирование

#### Ручное тестирование:
1. Откройте http://localhost:8080
2. Нажмите "Start Trading"
3. Проверьте, что статус изменился на "ACTIVE"
4. Нажмите "Stop Trading"
5. Проверьте, что статус изменился на "STOPPED"

#### Автоматическое тестирование:
```bash
# Проверьте логи
tail -f logs/scalper-bot.log

# Или в консоли приложения
# Должны появиться сообщения о старте/остановке торговли
```

### 6. Дополнительные функции

#### Автоматическое обновление:
- Страница обновляется каждые 30 секунд
- Статус торговли обновляется автоматически
- Активные сделки отображаются в реальном времени

#### Визуальная обратная связь:
- Кнопки показывают состояние загрузки
- Анимация при нажатии
- Цветовая индикация статуса

### 7. API Endpoints

#### POST /start-trading
- Запускает торговлю
- Параметры: symbol, strategyName (опционально)
- Возвращает: редирект на главную страницу

#### POST /stop-trading
- Останавливает торговлю
- Параметры: нет
- Возвращает: редирект на главную страницу

### 8. Мониторинг

#### Проверка статуса:
```java
// В коде приложения
boolean isTrading = tradingScheduler.isTradingEnabled();
int activeTrades = tradingScheduler.getActiveTrades().size();
```

#### Логирование:
```yaml
logging:
  level:
    com.bitunix.scalper.controller.DashboardController: DEBUG
    com.bitunix.scalper.scheduler.TradingScheduler: DEBUG
```

## Контакты

При проблемах:
1. Проверьте логи приложения
2. Убедитесь в правильности настроек
3. Проверьте подключение к базе данных
4. Перезапустите приложение
